# SoloMemo

å®Œå…¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªã¤ã¶ã‚„ããƒ»æ—¥è¨˜ã‚¢ãƒ—ãƒªï¼ˆPWAå¯¾å¿œï¼‰

## ğŸ“‹ ç›®æ¬¡

- [è¦ä»¶å®šç¾©](#è¦ä»¶å®šç¾©)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤](#æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤)
- [æ©Ÿèƒ½ä¸€è¦§](#æ©Ÿèƒ½ä¸€è¦§)

---

## è¦ä»¶å®šç¾©

### æ¦‚è¦
å®Œå…¨ã«è‡ªåˆ†å°‚ç”¨ï¼ˆå…¬é–‹è¨­å®šãªã—ï¼‰ã®ã¤ã¶ã‚„ããƒ»æ—¥è¨˜ã‚¢ãƒ—ãƒªã€‚æ—¥ã€…ã®æ„šç—´ã‚„æ€è€ƒã€æ°—ã«ãªã£ãŸè¨˜äº‹URLã‚’OGPä»˜ãã§è¨˜éŒ²ã§ãã‚‹ã€‚

### åŸºæœ¬æ©Ÿèƒ½

#### 1. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ï¼ˆãƒ¡ãƒ¼ãƒ«èªè¨¼ï¼‰
- ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ï¼ˆLaravel Sanctumï¼‰
- å®Œå…¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨­å®šï¼ˆæœ¬äººã®ã¿é–²è¦§å¯èƒ½ï¼‰
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ï¼ˆåå‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ï¼ˆç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä»˜ãï¼‰

#### 2. ã¤ã¶ã‚„ãæŠ•ç¨¿
- ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã«ã‚ˆã‚‹æŠ•ç¨¿ï¼ˆæœ€å¤§280æ–‡å­—ï¼‰
- URLã‚’è²¼ã‚‹ã¨OGPæƒ…å ±ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»ç”»åƒãƒ»æ¦‚è¦ï¼‰ã‚’è‡ªå‹•å–å¾—ãƒ»è¡¨ç¤º
- æŠ•ç¨¿ã®ç·¨é›†ãƒ»å‰Šé™¤ï¼ˆç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä»˜ãï¼‰

#### 3. æŠ•ç¨¿ä¸€è¦§
- æŠ•ç¨¿ã®æ™‚ç³»åˆ—ãƒªã‚¹ãƒˆè¡¨ç¤ºï¼ˆæœ€æ–°é †ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
- OGPãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä»˜ãURLã®ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º
- æŠ•ç¨¿æ—¥æ™‚ã®ç›¸å¯¾è¡¨ç¤ºï¼ˆã€Œ3åˆ†å‰ã€ãªã©ï¼‰

#### 4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ã‚·ãƒ³ãƒ—ãƒ«ã§è»½å¿«ãªãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«å„ªå…ˆã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼‰
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- PWAå¯¾å¿œï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œã€ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ï¼‰
- å¤šè¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªãƒ»è‹±èªï¼‰

#### 5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- HTTPSå¯¾å¿œï¼ˆå…¨é€šä¿¡ã®æš—å·åŒ–ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- CORSè¨­å®š
- ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼ï¼ˆLaravel Sanctumï¼‰

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Laravel 11.x
- **è¨€èª**: PHP 8.2+
- **èªè¨¼**: Laravel Sanctum
- **OGPå–å¾—**: shweshi/opengraph
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: MySQL 8.0

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: React 19.x
- **è¨€èª**: TypeScript 5.x
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Vite 7.x
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS 3.x
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: React Router DOM
- **å›½éš›åŒ–**: i18next, react-i18next
- **PWA**: vite-plugin-pwa, Workbox
- **HTTPé€šä¿¡**: Axios
- **æ—¥ä»˜å‡¦ç†**: date-fns

### ã‚¤ãƒ³ãƒ•ãƒ©
- **ã‚³ãƒ³ãƒ†ãƒŠ**: Docker, Docker Compose
- **Webã‚µãƒ¼ãƒãƒ¼**: Nginx (Alpine)
- **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼**: PHP-FPM
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: MySQL 8.0
- **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼**: Vite (Node.js 20)

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users    â”‚       â”‚    posts    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚â”€â”€â”€â”   â”‚ id          â”‚
â”‚ name        â”‚   â””â”€â”€<â”‚ user_id     â”‚
â”‚ email       â”‚       â”‚ content     â”‚
â”‚ password    â”‚       â”‚ created_at  â”‚
â”‚ created_at  â”‚       â”‚ updated_at  â”‚
â”‚ updated_at  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ ogp_caches   â”‚
                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                      â”‚ id           â”‚
                      â”‚ url          â”‚
                      â”‚ title        â”‚
                      â”‚ description  â”‚
                      â”‚ image        â”‚
                      â”‚ site_name    â”‚
                      â”‚ created_at   â”‚
                      â”‚ updated_at   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

#### users ãƒ†ãƒ¼ãƒ–ãƒ«
| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | BIGINT UNSIGNED | PRIMARY KEY, AUTO_INCREMENT | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| name | VARCHAR(255) | NOT NULL | ãƒ¦ãƒ¼ã‚¶ãƒ¼å |
| email | VARCHAR(255) | NOT NULL, UNIQUE | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| password | VARCHAR(255) | NOT NULL | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰ |
| email_verified_at | TIMESTAMP | NULL | ãƒ¡ãƒ¼ãƒ«ç¢ºèªæ—¥æ™‚ |
| remember_token | VARCHAR(100) | NULL | Rememberãƒˆãƒ¼ã‚¯ãƒ³ |
| created_at | TIMESTAMP | NULL | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMP | NULL | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- PRIMARY KEY (`id`)
- UNIQUE KEY (`email`)

---

#### posts ãƒ†ãƒ¼ãƒ–ãƒ«
| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | BIGINT UNSIGNED | PRIMARY KEY, AUTO_INCREMENT | æŠ•ç¨¿ID |
| user_id | BIGINT UNSIGNED | NOT NULL, FOREIGN KEY | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| content | TEXT | NOT NULL | æŠ•ç¨¿å†…å®¹ï¼ˆæœ€å¤§280æ–‡å­—ï¼‰ |
| created_at | TIMESTAMP | NULL | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMP | NULL | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- PRIMARY KEY (`id`)
- FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
- INDEX (`user_id`, `created_at`)

---

#### ogp_caches ãƒ†ãƒ¼ãƒ–ãƒ«
| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | BIGINT UNSIGNED | PRIMARY KEY, AUTO_INCREMENT | OGPã‚­ãƒ£ãƒƒã‚·ãƒ¥ID |
| url | VARCHAR(255) | NOT NULL, UNIQUE | URL |
| title | VARCHAR(255) | NULL | ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« |
| description | TEXT | NULL | ãƒšãƒ¼ã‚¸èª¬æ˜ |
| image | VARCHAR(255) | NULL | OGPç”»åƒURL |
| site_name | VARCHAR(255) | NULL | ã‚µã‚¤ãƒˆå |
| created_at | TIMESTAMP | NULL | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMP | NULL | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- PRIMARY KEY (`id`)
- UNIQUE KEY (`url`)

---

#### personal_access_tokens ãƒ†ãƒ¼ãƒ–ãƒ« (Laravel Sanctum)
| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | BIGINT UNSIGNED | PRIMARY KEY, AUTO_INCREMENT | ãƒˆãƒ¼ã‚¯ãƒ³ID |
| tokenable_type | VARCHAR(255) | NOT NULL | ãƒˆãƒ¼ã‚¯ãƒ³æ‰€æœ‰è€…ã®å‹ |
| tokenable_id | BIGINT UNSIGNED | NOT NULL | ãƒˆãƒ¼ã‚¯ãƒ³æ‰€æœ‰è€…ã®ID |
| name | VARCHAR(255) | NOT NULL | ãƒˆãƒ¼ã‚¯ãƒ³å |
| token | VARCHAR(64) | NOT NULL, UNIQUE | ãƒˆãƒ¼ã‚¯ãƒ³å€¤ |
| abilities | TEXT | NULL | ã‚¢ãƒ“ãƒªãƒ†ã‚£ |
| last_used_at | TIMESTAMP | NULL | æœ€çµ‚ä½¿ç”¨æ—¥æ™‚ |
| expires_at | TIMESTAMP | NULL | æœ‰åŠ¹æœŸé™ |
| created_at | TIMESTAMP | NULL | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMP | NULL | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- PRIMARY KEY (`id`)
- UNIQUE KEY (`token`)
- INDEX (`tokenable_type`, `tokenable_id`)

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Docker Desktop
- Git

### ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒæ§‹ç¯‰

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
```bash
git clone <repository-url>
cd SoloMemo
```

2. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®.envãƒ•ã‚¡ã‚¤ãƒ«ã¯æ—¢ã«ä½œæˆæ¸ˆã¿
# å¿…è¦ã«å¿œã˜ã¦ç·¨é›†ã—ã¦ãã ã•ã„
```

3. **Dockerã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•**
```bash
docker compose up -d --build
```

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
```bash
docker compose exec app php artisan migrate
```

5. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ã®ç”Ÿæˆ**
```bash
docker compose exec app php artisan key:generate
```

6. **ã‚¢ã‚¯ã‚»ã‚¹**
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:5173
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: http://localhost:8085

---

## æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ
    â†“
ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ (Nginx)
    â†“ (ãƒãƒ¼ãƒãƒ£ãƒ«ãƒ›ã‚¹ãƒˆ: solomemo.example.com)
    â†“ (Proxy Pass: http://localhost:8085)
    â†“
Dockerã‚³ãƒ³ãƒ†ãƒŠ (solomemo-nginx)
    â†“
PHP-FPM (Laravel API)
```

### 1. æœ¬ç•ªç”¨ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

**backend/.env.production**
```bash
APP_NAME=SoloMemo
APP_ENV=production
APP_KEY=                              # php artisan key:generate ã§ç”Ÿæˆ
APP_DEBUG=false
APP_URL=https://solomemo.example.com

DB_CONNECTION=mysql
DB_HOST=db
DB_PORT=3306
DB_DATABASE=solomemo_prod
DB_USERNAME=solomemo_prod
DB_PASSWORD=<strong-password>         # å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«å¤‰æ›´

SESSION_DRIVER=database
SESSION_LIFETIME=120

CACHE_STORE=database
```

### 2. docker-compose.prod.yml ã®ä½œæˆ

```yaml
services:
  nginx:
    image: nginx:alpine
    ports:
      - "8085:80"
    volumes:
      - ./backend:/var/www/html
      - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf
    depends_on:
      - app
    networks:
      - solomemo
    restart: unless-stopped

  app:
    build:
      context: .
      dockerfile: docker/php/Dockerfile
    volumes:
      - ./backend:/var/www/html
    environment:
      - DB_CONNECTION=mysql
      - DB_HOST=db
      - DB_PORT=3306
      - DB_DATABASE=solomemo_prod
      - DB_USERNAME=solomemo_prod
      - DB_PASSWORD=${DB_PASSWORD}
    depends_on:
      - db
    networks:
      - solomemo
    restart: unless-stopped

  db:
    image: mysql:8.0
    ports:
      - "3308:3306"
    environment:
      MYSQL_DATABASE: solomemo_prod
      MYSQL_USER: solomemo_prod
      MYSQL_PASSWORD: ${DB_PASSWORD}
      MYSQL_ROOT_PASSWORD: ${DB_ROOT_PASSWORD}
    volumes:
      - db-data:/var/lib/mysql
    networks:
      - solomemo
    restart: unless-stopped

networks:
  solomemo:
    driver: bridge

volumes:
  db-data:
```

### 3. ãƒ›ã‚¹ãƒˆã®Nginxè¨­å®š

**/etc/nginx/sites-available/solomemo.conf**
```nginx
# HTTPã‹ã‚‰HTTPSã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
server {
    listen 80;
    server_name solomemo.example.com;
    return 301 https://$server_name$request_uri;
}

# HTTPSè¨­å®š
server {
    listen 443 ssl http2;
    server_name solomemo.example.com;

    # SSLè¨¼æ˜æ›¸ã®è¨­å®š (Let's Encryptæ¨å¥¨)
    ssl_certificate /etc/letsencrypt/live/solomemo.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/solomemo.example.com/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
    root /var/www/solomemo/frontend/dist;
    index index.html;

    # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºåˆ¶é™
    client_max_body_size 10M;

    # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    location / {
        try_files $uri $uri/ /index.html;
    }

    # APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’Dockerã‚³ãƒ³ãƒ†ãƒŠã¸ãƒ—ãƒ­ã‚­ã‚·
    location /api {
        proxy_pass http://localhost:8085;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_redirect off;
    }

    # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;
}
```

### 4. ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

#### 4.1 ã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ã«SSHæ¥ç¶š
ssh user@your-server.com

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•
cd /var/www/solomemo

# Gitãƒªãƒã‚¸ãƒˆãƒªã‚’Pull
git pull origin main

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ«ãƒ‰
cd frontend
npm install
npm run build

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd ../backend
composer install --no-dev --optimize-autoloader

# ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
cp .env.production .env

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ã®ç”Ÿæˆ
php artisan key:generate

# è¨­å®šã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢
php artisan config:clear
php artisan cache:clear

# æœ¬ç•ªç”¨ã®æœ€é©åŒ–
php artisan config:cache
php artisan route:cache
php artisan view:cache

# Dockerã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
cd ..
docker compose -f docker-compose.prod.yml up -d --build

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
docker compose -f docker-compose.prod.yml exec app php artisan migrate --force
```

#### 4.2 Nginxã®æœ‰åŠ¹åŒ–

```bash
# ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®ä½œæˆ
sudo ln -s /etc/nginx/sites-available/solomemo.conf /etc/nginx/sites-enabled/

# Nginxè¨­å®šãƒ†ã‚¹ãƒˆ
sudo nginx -t

# Nginxãƒªãƒ­ãƒ¼ãƒ‰
sudo systemctl reload nginx
```

#### 4.3 SSLè¨¼æ˜æ›¸ã®å–å¾—ï¼ˆLet's Encryptï¼‰

```bash
# Certbotã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install certbot python3-certbot-nginx

# SSLè¨¼æ˜æ›¸ã®å–å¾—
sudo certbot --nginx -d solomemo.example.com

# è‡ªå‹•æ›´æ–°è¨­å®šã®ç¢ºèª
sudo certbot renew --dry-run
```

### 5. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

**.env** ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¨­å®š:
```bash
DB_PASSWORD=<strong-password>
DB_ROOT_PASSWORD=<strong-root-password>
```

### 6. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®API URLè¨­å®š

**frontend/src/lib/axios.ts** ã‚’æœ¬ç•ªç”¨ã«æ›´æ–°:
```typescript
const api = axios.create({
    baseURL: '/api',  // ç›¸å¯¾ãƒ‘ã‚¹ã«å¤‰æ›´ï¼ˆNginxãƒ—ãƒ­ã‚­ã‚·çµŒç”±ï¼‰
    headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
    },
});
```

### 7. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
#!/bin/bash
BACKUP_DIR="/var/backups/solomemo"
DATE=$(date +%Y%m%d_%H%M%S)

docker compose -f docker-compose.prod.yml exec -T db mysqldump \
  -u root -p${DB_ROOT_PASSWORD} solomemo_prod \
  > ${BACKUP_DIR}/solomemo_${DATE}.sql

# å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤ï¼ˆ30æ—¥ä»¥ä¸Šï¼‰
find ${BACKUP_DIR} -name "*.sql" -mtime +30 -delete
```

### 8. ç›£è¦–ã¨ãƒ­ã‚°

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
docker compose -f docker-compose.prod.yml logs -f app

# Nginxãƒ­ã‚°
docker compose -f docker-compose.prod.yml logs -f nginx

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ­ã‚°
docker compose -f docker-compose.prod.yml logs -f db
```

---

## æ©Ÿèƒ½ä¸€è¦§

### å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- âœ… æŠ•ç¨¿ã®ä½œæˆãƒ»è¡¨ç¤ºãƒ»å‰Šé™¤
- âœ… OGPè‡ªå‹•å–å¾—ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
- âœ… ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ï¼ˆåå‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
- âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤
- âœ… ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆæŠ•ç¨¿å‰Šé™¤ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ï¼‰
- âœ… ãƒã‚¤ãƒšãƒ¼ã‚¸
- âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- âœ… ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- âœ… å¤šè¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªãƒ»è‹±èªï¼‰
- âœ… PWAå¯¾å¿œï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œã€ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ï¼‰
- âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤º

### å°†æ¥çš„ãªè¿½åŠ æ©Ÿèƒ½å€™è£œ

- ğŸ”² æ¤œç´¢æ©Ÿèƒ½ï¼ˆãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ã€æ—¥ä»˜ç¯„å›²æŒ‡å®šï¼‰
- ğŸ”² ã‚¿ã‚°ä»˜ã‘æ©Ÿèƒ½
- ğŸ”² AIã«ã‚ˆã‚‹æ„Ÿæƒ…åˆ†æãƒ»è¦ç´„
- ğŸ”² æŠ•ç¨¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆJSONã€CSVã€PDFï¼‰
- ğŸ”² ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼å¤‰æ›´
- ğŸ”² ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- ğŸ”² ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ä½œæˆè€…

SoloMemo Development Team

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Dockerã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ãªã„å ´åˆ

```bash
# ãƒ­ã‚°ã‚’ç¢ºèª
docker compose logs

# æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã—ã¦å†ä½œæˆ
docker compose down -v
docker compose up -d --build
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ç¢ºèª
docker compose ps db

# ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
docker compose exec app env | grep DB_
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒãƒ“ãƒ«ãƒ‰ã§ããªã„å ´åˆ

```bash
# node_modulesã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf frontend/node_modules
cd frontend
npm install
npm run build
```
